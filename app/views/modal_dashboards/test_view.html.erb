<!-- Tells Stimulus to create an instance of the controller class in modal_controller.js -->
<div data-controller="modal-form">
  <div class="flex items-center justify-center h-screen">
    <div class="relative px-6 pt-4 pb-4 bg-white shadow-xl ring-1 ring-gray-900/5 sm:mx-auto sm:max-w-lg sm:rounded-lg sm:px-10">
      <div class="max-w-md mx-auto">
        <div class="divide-y divide-gray-300/50">
          <div class="py-8 space-y-8 text-base leading-7 text-gray-600">
            <button id="personalDataModalOpenBtn" data-action="click->modal-form#open_personal_data_modal" class="w-full h-12 px-6 text-indigo-100 transition-colors duration-150 bg-indigo-700 rounded-lg focus:shadow-outline hover:bg-indigo-800">Personal Data</button>
            <button id="employmentModalOpenBtn"  data-action="click->modal-form#open_employment_modal" class="w-full h-12 px-6 text-indigo-100 transition-colors duration-150 bg-indigo-700 rounded-lg focus:shadow-outline hover:bg-indigo-800">Employment</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Personal Data Modal -->
  <div data-modal-form-target="personalDataModal" id="personalDataModal" class="fixed top-0 left-0 flex items-center justify-center hidden w-full h-full modal">
    <div data-modal-form-target="personalDataModalOverlay" id="personalDataModalOverlay" class="absolute w-full h-full bg-gray-900 opacity-50 modal-overlay"></div>
    <div data-controller="form" class="z-50 w-11/12 mx-auto overflow-y-auto bg-white rounded shadow-lg modal-container md:max-w-md">
      <!-- Modal Header -->
      <div class="px-4 py-2 bg-gray-300 modal-header">
        <h2 class="text-lg font-semibold">Personal Data</h2>
      </div>
      <!-- Modal Body -->
      <div class="p-4 modal-body">

        <div role="alert" class="error-message"  data-form-target="errorMessage">
          <div class="px-4 py-2 font-bold text-white bg-red-500 rounded-t">
            Error
          </div>
          <div class="px-4 py-3 text-red-700 bg-red-100 border border-t-0 border-red-400 rounded-b">
            <p>Record not saved</p>
          </div>
        </div>

        <div data-form-target="successMessage" class="px-4 py-3 text-teal-900 bg-teal-100 border-t-4 border-teal-500 rounded-b shadow-md success-message" role="alert">
          <div class="flex">
            <div class="py-1"><svg class="w-6 h-6 mr-4 text-teal-500 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
            <div>
              <p class="font-bold">Record Saved</p>
            </div>
          </div>
        </div>

        <!-- Tells Stimulus to create an instance of the controller class in form_controller.js -->
        <%= form_with(model: User.new, url: modal_dashboards_create_user_path, method: :post, remote: true, class: "space-y-4", id: 'user-form', data: { form_target: "userForm" }) do |form| %>
          <!-- First Name -->
          <div>
            <%= form.label :first_name, class: "block font-bold text-gray-700", data: {form_target: "firstNameLabel"} do %>
              First Name<span class="text-red-500">*</span>
            <% end %>
            <%= form.text_field :first_name, maxlength: 25, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true, data: {form_target: "firstNameInput"} %>
            <div class="invalid-feedback" data-form-target="firstNameInputError"></div>
          </div>

          <!-- Last Name -->
          <div>
            <%= form.label :last_name, class: "block font-bold text-gray-700", data: {form_target: "lastNameLabel"} do %>
              Last Name<span class="text-red-500">*</span>
            <% end %>
            <%= form.text_field :last_name, maxlength: 50, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true, data: {form_target: "lastNameInput"} %>
            <div class="invalid-feedback" data-form-target="lastNameInputError"></div>
          </div>

          <!-- Nick Name -->
          <div>
            <%= form.label :nick_name, class: "block font-bold text-gray-700", data: {form_target: "nickNameLabel"} do %>
              Nick Name<span class="text-red-500">*</span>
            <% end %>
            <%= form.text_field :nick_name, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", data: {form_target: "nickNameInput"} %>
            <div class="invalid-feedback" data-form-target="nickNameInputError"></div>
          </div>

          <!-- Email -->
          <div>
            <%= form.label :email, class: "block font-bold text-gray-700", data: {form_target: "emailLabel"} do %>
              Email<span class="text-red-500">*</span>
            <% end %>
            <%= form.email_field :email, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true, data: {form_target: "emailInput"} %>
            <div class="invalid-feedback" data-form-target="emailInputError"></div>
          </div>

          <!-- Phone -->
            <div>
            <%= form.label :phone_number, class: "block font-bold text-gray-700", data: {form_target: "phoneLabel"} do %>
              Phone Number<span class="text-red-500">*</span>
            <% end %>
            <%= form.telephone_field :phone_number, maxlength: 25, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true, data: {form_target: "phoneInput"} %>
            <div class="invalid-feedback" data-form-target="phoneInputError"></div>
          </div>
        <% end %>
      </div>
      <!-- Modal Footer -->
      <div class="flex justify-end px-4 py-5 pt-4 modal-footer">
        <button id="personalDataModalCloseBtn"  data-action="click->modal-form#close_personal_data_modal" type="button" class="px-4 py-2 mr-2 font-bold text-white bg-gray-400 rounded hover:bg-gray-500">Cancel</button>
        <%= button_tag class:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700", data: {form_target: "userFormSubmitBtn"}, type: 'submit', form: 'user-form' do %>
          Save
        <% end %>
      </div>
    </div>
  </div>

  <!-- Employment Modal-->
  <div data-modal-form-target="employmentModal" data-form-target="employmentModal" id="employmentModal" class="fixed top-0 left-0 flex items-center justify-center hidden w-full h-full modal">
    <div data-modal-form-target="employmentModalOverlay" data-form-target="employmentModalOverlay" id="employmentModalOverlay" class="absolute w-full h-full bg-gray-900 opacity-50 modal-overlay"></div>

    <div class="z-50 w-11/12 mx-auto overflow-y-auto bg-white rounded shadow-lg modal-container md:max-w-md">
      <!-- Modal Header -->
      <div class="px-4 py-2 bg-gray-300 modal-header">
        <h2 class="text-lg font-semibold">Employment</h2>
      </div>

      <!-- Modal Body -->
      <div class="p-4 modal-body">
        <%= form_with(model: Employment.new, url: modal_dashboards_create_employment_path, method: :post, local: true, class: "space-y-4") do |form| %>
          <!-- Employer -->
          <div>
            <%= form.label :employer_name, class: "block font-bold text-gray-700" do %>
              First Name<span class="text-red-500">*</span>
            <% end %>
            <%= form.text_field :employer_name, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true %>
          </div>

          <!-- Employement Started Date -->
          <div>
            <%= form.label :employment_started_date, class: "block font-bold text-gray-700" do %>
              First Name<span class="text-red-500">*</span>
            <% end %>
            <%= form.date_field :employment_started_date, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true %>
          </div>

          <!-- Employement Ended Date -->
          <div>
            <%= form.label :employment_ended_date, class: "block font-bold text-gray-700" do %>
              First Name<span class="text-red-500">*</span>
            <% end %>
            <%= form.date_field :employment_ended_date, class: "block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50", required: true %>
          </div>
        <% end %>
      </div>

      <!-- Modal Footer -->
      <div class="flex justify-end px-4 py-5 pt-4 modal-footer">
        <button id="employmentModalCloseBtn"  data-action="click->modal-form#close_employment_modal" type="button" class="px-4 py-2 mr-2 font-bold text-white bg-gray-400 rounded hover:bg-gray-500">Cancel</button>
        <button type="button" class="px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700">Save</button>
      </div>
    </div>
  </div>
</div>
